{% extends "OCReservationBundle::layout.html.twig" %}

{% block title %}
	{{ parent() }}
{% endblock %}

{% block ocreservation_body %}

	<p>Date : {{ commande.jour|date('d/m/Y') }}</p>
	<p>Type de billet : {{ commande.type.nom }}</p>
	<p>Email : {{ commande.email }} </p>
	
	<table>

		<tr>
			<th>Billet</th>
			<th>Nom</th>
			<th>Prénom</th>
			<th>Date de naissance</th>
			<th>Pays</th>
			<th>Tarif</th>
			<th>Prix du billet</th>
		</tr>

	{% set numeroBillet = '0' %}

	{% for billet in commande.billets %}

		{% set numeroBillet = numeroBillet + 1 %}
			
        <tr>
        	<th>Billet n°{{ numeroBillet }}</th>
        	<th>{{ billet.nom }}</th>
        	<th>{{ billet.prenom }}</th>
        	<th>{{ billet.dateNaissance|date('d/m/Y') }}</th>
        	<th>{{ billet.pays }}</th>
        	<th>{{ billet.prix.nom }}</th>
        	<th>{{ billet.prix.valeur|number_format(2, ',') }}</th>
        </tr>
    {% endfor %}

    </table>

    <p>Montant total de la commande : {{ commande.prixTotal|number_format(2, ',') }}</p>

    <form action="{{ path('oc_reservation_checkout') }}" method="POST">
	    <script
            src="https://checkout.stripe.com/checkout.js" class="stripe-button"
            data-key="pk_test_llFdgKV13hfAiJ0ieHhgaFw8"
            data-amount="{{ commande.prixTotal }}00"
            data-name="oc-stripe"
            data-description="Widget"
            data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
            data-locale="auto"
            data-currency="eur">
	    </script>
	</form>

{% endblock %}